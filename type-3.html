<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="EPA 608 Type III Test Practice - Low-pressure appliances like centrifugal chillers. 25 questions, instant scoring, detailed explanations.">
    <meta name="author" content="EPA 608 Practice Test">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="EPA 608 Type III Practice Test - EPA 608 Practice Test">
    <meta property="og:description" content="Practice the EPA 608 Type III section covering low-pressure appliances. 25 expert-designed questions for centrifugal chillers and similar systems.">
    <meta property="og:type" content="website">
    <title>EPA 608 Type III Practice Test - EPA 608 Practice Test</title>
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://epa608practicetest.com/type-3.html">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:image" content="https://epa608practicetest.com/images/og-image.jpg">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="EPA 608 Type III Practice Test - EPA 608 Practice Test">
    <meta name="twitter:description" content="Practice the EPA 608 Type III section covering low-pressure appliances. 25 expert-designed questions for centrifugal chillers and similar systems.">
    <meta name="twitter:image" content="https://epa608practicetest.com/images/og-image.jpg">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{font:16px/1.6 system-ui,sans-serif;color:#333;background:#fff}
        .container{width:100%;margin:0;padding:0 20px}
        
        /* Header */
        header{background:#fff;box-shadow:0 2px 10px rgba(0,0,0,.1);position:sticky;top:0;z-index:100}
        .header-content{display:flex;justify-content:space-between;align-items:center;padding:16px 0}
        .logo{font-size:24px;font-weight:bold;color:#007acc;text-decoration:none}
        .nav-menu{display:flex;list-style:none;gap:32px}
        .nav-menu a{text-decoration:none;color:#333;font-weight:500;transition:color .3s}
        .nav-menu a:hover,.nav-menu a.active{color:#007acc}
        
        /* Test Hero */
        .test-hero{background:linear-gradient(135deg,#28a745,#20c997);color:#fff;padding:60px 0;text-align:center}
        .test-hero h1{font-size:42px;font-weight:bold;margin-bottom:16px}
        .test-hero .subtitle{font-size:20px;margin-bottom:32px;opacity:.9}
        .test-info{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:24px;max-width:800px;margin:0 auto 40px}
        .info-card{background:rgba(255,255,255,.15);padding:20px;border-radius:8px;text-align:center}
        .info-number{font-size:28px;font-weight:bold;margin-bottom:8px}
        .info-label{font-size:14px;opacity:.9}
        
        /* Start Test Section */
        .start-section{padding:60px 0;background:#f8f9fa;text-align:center}
        .start-btn{background:#28a745;color:#fff;border:none;padding:20px 48px;border-radius:8px;font-size:20px;font-weight:bold;cursor:pointer;transition:all .3s;text-decoration:none;display:inline-block;margin-bottom:24px}
        .start-btn:hover{background:#218838;transform:translateY(-2px);box-shadow:0 8px 25px rgba(40,167,69,.3)}
        .test-notes{max-width:600px;margin:0 auto;color:#666;line-height:1.7}
        
        /* Content Sections */
        .content-section{padding:60px 0}
        .content-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:32px;margin-top:40px}
        .content-card{background:#fff;padding:32px;border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,.08);border-left:4px solid #28a745}
        .content-card h4{font-size:20px;margin-bottom:16px;color:#333}
        .content-card ul{margin:0;padding-left:20px}
        .content-card li{margin-bottom:8px;line-height:1.6;color:#666}
        
        /* Test Interface Styles */
        .test-container{padding:40px 0;background:#f8f9fa}
        .test-header{display:flex;align-items:center;background:#fff;padding:20px;border-radius:8px;margin-bottom:24px;box-shadow:0 2px 10px rgba(0,0,0,.1)}
        .question-counter{font-weight:bold;color:#333}
        .test-progress{flex-grow:1;background:#e9ecef;height:8px;border-radius:4px;overflow:hidden;margin:0 20px}
        .progress-bar{background:linear-gradient(90deg,#28a745,#20c997);height:100%;width:0%;transition:width .3s ease}
        .timer{font-size:1.2em;font-weight:bold;color:#dc3545;min-width:80px}
        
        .question-container{background:#fff;padding:32px;border-radius:8px;margin-bottom:24px;box-shadow:0 2px 10px rgba(0,0,0,.1)}
        .question-text{font-size:20px;font-weight:600;color:#333;margin-bottom:24px;line-height:1.4}
        .answers{list-style:none;margin:0;padding:0}
        .answer-item{margin-bottom:12px;padding:16px;border:2px solid #e9ecef;border-radius:8px;cursor:pointer;transition:all .3s ease;background:#fff}
        .answer-item:hover{border-color:#007acc;background:#f8f9fa}
        .answer-item.selected{border-color:#007acc;background:#e3f2fd}
        .answer-item.correct{background:#d4edda;border-color:#28a745;animation:correctPulse .8s ease-out}
        .answer-item.incorrect{background:#f8d7da;border-color:#dc3545;animation:incorrectShake .6s ease-out}
        .answer-item label{display:flex;align-items:center;font-size:16px;color:#333;cursor:pointer;width:100%}
        .answer-item input{margin-right:12px}
        .answer-feedback{margin-left:auto;font-weight:bold}
        .answer-feedback.correct{color:#28a745}
        .answer-feedback.incorrect{color:#dc3545}
        
        .test-navigation{display:flex;justify-content:space-between;gap:16px}
        .nav-button{padding:12px 32px;border:none;border-radius:6px;font-size:16px;font-weight:bold;cursor:pointer;transition:all .3s}
        .nav-button:disabled{background:#e9ecef;color:#6c757d;cursor:not-allowed}
        .nav-button:not(:disabled){background:#007acc;color:#fff}
        .nav-button:not(:disabled):hover{background:#0056b3;transform:translateY(-1px)}
        .submit-button{background:#dc3545!important}
        .submit-button:hover{background:#c82333!important}
        
        .results{padding:60px 0;background:#f8f9fa;text-align:center}
        .score-display{font-size:48px;font-weight:bold;margin:32px 0;color:#28a745}
        .results-buttons{display:flex;gap:16px;justify-content:center;margin-top:32px;flex-wrap:wrap}
        .history-button,.restart-button{padding:12px 24px;border:none;border-radius:6px;font-size:16px;font-weight:bold;cursor:pointer;transition:all .3s;text-decoration:none;display:inline-block}
        .history-button{background:#17a2b8;color:#fff}
        .restart-button{background:#28a745;color:#fff}
        .history-button:hover{background:#138496}
        .restart-button:hover{background:#218838}
        
        /* Social Share Buttons */
        .social-share{margin-top:40px;padding-top:32px;border-top:1px solid #e9ecef}
        .social-share p{font-size:18px;font-weight:600;color:#333;margin-bottom:16px}
        .share-buttons{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}
        .share-btn{padding:10px 20px;border:none;border-radius:6px;font-size:14px;font-weight:bold;cursor:pointer;transition:all .3s;text-decoration:none;display:inline-block}
        .share-btn.twitter{background:#1da1f2;color:#fff}
        .share-btn.twitter:hover{background:#0d8bd9}
        .share-btn.facebook{background:#1877f2;color:#fff}
        .share-btn.facebook:hover{background:#166fe5}
        .share-btn.linkedin{background:#0077b5;color:#fff}
        .share-btn.linkedin:hover{background:#005885}
        .share-btn.copy-link{background:#6c757d;color:#fff}
        .share-btn.copy-link:hover{background:#545b62}
        
        @keyframes correctPulse{0%{transform:scale(1);box-shadow:0 0 0 0 rgba(40,167,69,.7)}50%{transform:scale(1.02);box-shadow:0 0 0 10px rgba(40,167,69,0)}100%{transform:scale(1);box-shadow:0 0 0 0 rgba(40,167,69,0)}}
        @keyframes incorrectShake{0%,100%{transform:translateX(0)}25%{transform:translateX(-5px)}75%{transform:translateX(5px)}}
        
        /* Footer */
        footer{background:#333;color:#fff;padding:48px 0 32px}
        .footer-content{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:40px}
        .footer-section h4{font-size:18px;margin-bottom:16px;color:#fff}
        .footer-section ul{list-style:none}
        .footer-section a{color:#ccc;text-decoration:none;transition:color .3s}
        .footer-section a:hover{color:#fff}
        .footer-section li{margin-bottom:8px}
        .footer-bottom{border-top:1px solid #555;margin-top:32px;padding-top:24px;text-align:center;color:#ccc}
        
        /* Responsive Design */
        @media (max-width:768px){
            .container{padding:0 16px}
            .header-content{flex-direction:column;gap:16px}
            .nav-menu{gap:20px;flex-wrap:wrap;justify-content:center}
            .test-hero{padding:40px 0}
            .test-hero h1{font-size:32px}
            .test-info{grid-template-columns:repeat(2,1fr);gap:16px}
            .start-btn{padding:16px 32px;font-size:18px}
            .content-grid{grid-template-columns:1fr}
            .footer-content{grid-template-columns:1fr;text-align:center}
        }
        @media (max-width:480px){
            .test-hero h1{font-size:28px}
            .test-info{grid-template-columns:1fr}
        }
    </style>
</head>
<body>
    <script src="includes.js"></script>
    <div id="header-placeholder"></div>

    <main>
        <!-- Test Hero Section -->
        <section class="test-hero">
            <div class="container">
                <h1>EPA 608 Type III Practice Test</h1>
                <p class="subtitle">Low-pressure appliances like centrifugal chillers</p>
                
                <div class="test-info">
                    <div class="info-card">
                        <div class="info-number">25</div>
                        <div class="info-label">Questions</div>
                    </div>
                    <div class="info-card">
                        <div class="info-number">72%</div>
                        <div class="info-label">Passing Score</div>
                    </div>
                    <div class="info-card">
                        <div class="info-number">30</div>
                        <div class="info-label">Minutes</div>
                    </div>
                </div>
            </div>
        </section>


        <!-- Test Container -->
        <section class="test-container" id="testContainer">
            <div class="container">
                <div class="test-header">
                    <div class="question-counter" id="questionCounter">Question 1 of 25</div>
                    <div class="test-progress">
                        <div class="progress-bar" id="progressBar"></div>
                    </div>
                    <div class="timer" id="timer">30:00</div>
                </div>

                <div class="question-container">
                    <div class="question-text" id="questionText"></div>
                    <ul class="answers" id="answersContainer"></ul>
                </div>

                <div class="test-navigation">
                    <button class="nav-button" id="prevButton" onclick="previousQuestion()" disabled>Previous</button>
                    <button class="nav-button" id="nextButton" onclick="nextQuestion()">Next</button>
                    <button class="nav-button submit-button" id="submitButton" onclick="submitTest()" style="display: none;">Submit Test</button>
                </div>
            </div>
        </section>

        <!-- Results Section -->
        <section class="results" id="results" style="display:none;">
            <div class="container">
                <h2>🎯 Test Results</h2>
                <div class="score-display" id="scoreDisplay"></div>
                <p id="certificationStatus"></p>
                <div class="results-buttons">
                    <button class="history-button" onclick="window.location.href='history.html'">📊 Check Your History</button>
                    <button class="restart-button" onclick="location.reload()">🔄 Take Another Test</button>
                </div>
                
                <div class="social-share">
                    <p>Share your success:</p>
                    <div class="share-buttons">
                        <button class="share-btn twitter" onclick="shareOnTwitter()">🐦 Twitter</button>
                        <button class="share-btn facebook" onclick="shareOnFacebook()">📘 Facebook</button>
                        <button class="share-btn linkedin" onclick="shareOnLinkedIn()">💼 LinkedIn</button>
                        <button class="share-btn copy-link" onclick="copyTestLink()">🔗 Copy Link</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Content Overview -->
        <section class="content-section">
            <div class="container">
                <h2 class="section-title">What's Covered in Type III Test</h2>
                <p class="section-subtitle">Low-pressure refrigeration and chiller systems</p>
                
                <div class="content-grid">
                    <div class="content-card">
                        <h4>Low-Pressure Systems</h4>
                        <ul>
                            <li>Centrifugal chillers</li>
                            <li>Absorption refrigeration units</li>
                            <li>Large building HVAC systems</li>
                            <li>Industrial process chillers</li>
                            <li>Steam-driven absorption systems</li>
                        </ul>
                    </div>
                    
                    <div class="content-card">
                        <h4>Evacuation Methods</h4>
                        <ul>
                            <li>Deep vacuum procedures</li>
                            <li>Triple evacuation methods</li>
                            <li>Vacuum pump operation</li>
                            <li>Moisture removal techniques</li>
                            <li>System integrity testing</li>
                        </ul>
                    </div>
                    
                    <div class="content-card">
                        <h4>Safety Precautions</h4>
                        <ul>
                            <li>Confined space safety</li>
                            <li>Purging procedures</li>
                            <li>Refrigerant exposure limits</li>
                            <li>Emergency response planning</li>
                            <li>Equipment safety checks</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div id="footer-placeholder"></div>

    <script>
        // Test state variables
        let currentTest = [];
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let testTimer = null;
        let startTime = null;
        let currentScore = 0;
        let testHistory = JSON.parse(localStorage.getItem('epa608History') || '[]');
        const selectedTestType = 'type3';

        // Type III EPA 608 Questions Bank
        const questionBank = {
            type3: [
                {
                    question: "What is the typical operating pressure of a centrifugal chiller?",
                    answers: [
                        "Above atmospheric pressure",
                        "Below atmospheric pressure (vacuum)",
                        "Equal to atmospheric pressure", 
                        "Varies between positive and negative pressure"
                    ],
                    correct: 1
                },
                {
                    question: "What refrigerant is commonly used in low-pressure centrifugal chillers?",
                    answers: [
                        "R-410A",
                        "R-134a",
                        "R-123",
                        "R-22"
                    ],
                    correct: 2
                },
                {
                    question: "When servicing a low-pressure system, what is the primary safety concern?",
                    answers: [
                        "High pressure explosion",
                        "Air and moisture entering the system",
                        "Refrigerant freezing",
                        "Compressor overheating"
                    ],
                    correct: 1
                },
                {
                    question: "What is the minimum vacuum level required when evacuating a low-pressure system?",
                    answers: [
                        "500 microns",
                        "1000 microns",
                        "29 inches Hg",
                        "25 inches Hg"
                    ],
                    correct: 0
                },
                {
                    question: "What method is recommended for leak detection in low-pressure systems?",
                    answers: [
                        "Soap bubbles",
                        "Electronic leak detector",
                        "Pressurizing with nitrogen and using soap bubbles",
                        "Halide torch"
                    ],
                    correct: 2
                },
                {
                    question: "What is the proper procedure for opening a low-pressure system for service?",
                    answers: [
                        "Immediately disconnect refrigerant lines",
                        "Recover refrigerant first, then purge with nitrogen",
                        "Add refrigerant to create positive pressure",
                        "Break the vacuum and start work immediately"
                    ],
                    correct: 1
                },
                {
                    question: "What is the maximum allowable concentration of R-123 in occupied areas?",
                    answers: [
                        "1000 ppm",
                        "50 ppm",
                        "100 ppm",
                        "500 ppm"
                    ],
                    correct: 1
                },
                {
                    question: "Why are purge units used on low-pressure chillers?",
                    answers: [
                        "To add refrigerant",
                        "To remove non-condensables and air",
                        "To increase system pressure",
                        "To cool the condenser"
                    ],
                    correct: 1
                },
                {
                    question: "What is the typical evaporator temperature range for a centrifugal chiller?",
                    answers: [
                        "32°F to 45°F (0°C to 7°C)",
                        "10°F to 32°F (-12°C to 0°C)",
                        "45°F to 60°F (7°C to 16°C)",
                        "0°F to 20°F (-18°C to -7°C)"
                    ],
                    correct: 0
                },
                {
                    question: "What happens if air enters a low-pressure refrigeration system?",
                    answers: [
                        "System efficiency improves",
                        "Head pressure decreases",
                        "System efficiency decreases and head pressure increases",
                        "No effect on system operation"
                    ],
                    correct: 2
                },
                {
                    question: "What is the purpose of a rupture disc on a low-pressure chiller?",
                    answers: [
                        "To maintain system pressure",
                        "To prevent vacuum conditions",
                        "To protect against excessive pressure",
                        "To control refrigerant flow"
                    ],
                    correct: 2
                },
                {
                    question: "How should R-123 be stored?",
                    answers: [
                        "In any standard container",
                        "In dry, cool conditions away from heat sources",
                        "Only in pressurized containers",
                        "At temperatures above 100°F"
                    ],
                    correct: 1
                },
                {
                    question: "What is the primary reason for using a deep vacuum when evacuating low-pressure systems?",
                    answers: [
                        "To speed up the process",
                        "To remove moisture more effectively",
                        "To save energy",
                        "To reduce evacuation time"
                    ],
                    correct: 1
                },
                {
                    question: "What type of oil is typically used in centrifugal compressors?",
                    answers: [
                        "Mineral oil",
                        "Alkylbenzene oil",
                        "Polyol ester oil",
                        "Polyalkylene glycol oil"
                    ],
                    correct: 1
                },
                {
                    question: "What safety precaution should be taken when working on R-123 systems?",
                    answers: [
                        "Wear standard work clothes",
                        "Ensure adequate ventilation and use air monitoring",
                        "Work only during daylight hours",
                        "Use only hand tools"
                    ],
                    correct: 1
                },
                {
                    question: "What is the function of the condenser water system in a centrifugal chiller?",
                    answers: [
                        "To cool the compressor motor",
                        "To remove heat from the refrigerant in the condenser",
                        "To provide makeup water",
                        "To clean the evaporator"
                    ],
                    correct: 1
                },
                {
                    question: "Why must low-pressure systems be kept sealed when not in operation?",
                    answers: [
                        "To prevent refrigerant loss",
                        "To prevent air and moisture infiltration",
                        "To maintain oil levels",
                        "To keep the system pressurized"
                    ],
                    correct: 1
                },
                {
                    question: "What is the recommended procedure for charging a low-pressure system?",
                    answers: [
                        "Add liquid refrigerant to the high side",
                        "Add vapor refrigerant to the low side while running",
                        "Evacuate first, then add liquid refrigerant to the condenser",
                        "Add refrigerant through the purge unit"
                    ],
                    correct: 2
                },
                {
                    question: "What causes high discharge pressure in a centrifugal chiller?",
                    answers: [
                        "Low condenser water temperature",
                        "High condenser water temperature or flow restriction",
                        "Low refrigerant charge",
                        "Excessive evaporator load"
                    ],
                    correct: 1
                },
                {
                    question: "What is the primary advantage of using R-123 in low-pressure systems?",
                    answers: [
                        "High operating pressure",
                        "Excellent heat transfer properties and low pressure operation",
                        "Low cost",
                        "Easy handling"
                    ],
                    correct: 1
                },
                {
                    question: "What maintenance practice is critical for purge units?",
                    answers: [
                        "Daily visual inspection only",
                        "Regular monitoring of refrigerant loss and proper operation",
                        "Monthly refrigerant addition",
                        "Weekly pressure testing"
                    ],
                    correct: 1
                },
                {
                    question: "How should refrigerant be recovered from a low-pressure system?",
                    answers: [
                        "Using standard recovery equipment",
                        "Using equipment specifically designed for low-pressure refrigerants",
                        "By venting to atmosphere",
                        "Using a standard vacuum pump"
                    ],
                    correct: 1
                },
                {
                    question: "What is the typical capacity range for centrifugal chillers?",
                    answers: [
                        "5 to 50 tons",
                        "50 to 500 tons",
                        "150 to 6000+ tons",
                        "1 to 10 tons"
                    ],
                    correct: 2
                },
                {
                    question: "What happens during the purge cycle of a low-pressure chiller?",
                    answers: [
                        "Refrigerant is added to the system",
                        "Non-condensables are removed from the condenser",
                        "The system is shut down",
                        "Condenser water flow is increased"
                    ],
                    correct: 1
                },
                {
                    question: "What is the most important factor in preventing leaks in low-pressure systems?",
                    answers: [
                        "Using high-pressure fittings",
                        "Proper installation and regular maintenance of seals and gaskets",
                        "Overpressurizing the system",
                        "Using thread sealant on all connections"
                    ],
                    correct: 1
                }
            ]
        };

        function startTest() {
            // Show test container
            document.getElementById('testContainer').style.display = 'block';
            
            // Generate test questions
            currentTest = generateTest(['type3']);
            currentQuestionIndex = 0;
            userAnswers = new Array(currentTest.length).fill(null);
            currentScore = 0;
            startTime = new Date();
            
            // Start timer (30 minutes for Type III)
            startTimer(30);
            
            // Display first question
            displayQuestion();
        }

        function generateTest(sections) {
            let test = [];
            sections.forEach(section => {
                const sectionQuestions = [...questionBank[section]];
                
                // Shuffle questions
                for (let i = sectionQuestions.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [sectionQuestions[i], sectionQuestions[j]] = [sectionQuestions[j], sectionQuestions[i]];
                }
                
                sectionQuestions.forEach(q => {
                    const question = { ...q, section: section };
                    // Shuffle answers
                    const correctAnswer = question.answers[question.correct];
                    for (let i = question.answers.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [question.answers[i], question.answers[j]] = [question.answers[j], question.answers[i]];
                    }
                    question.correct = question.answers.indexOf(correctAnswer);
                    test.push(question);
                });
            });
            
            return test;
        }

        function startTimer(minutes) {
            let timeLeft = minutes * 60;
            const timerDisplay = document.getElementById('timer');
            
            testTimer = setInterval(() => {
                const mins = Math.floor(timeLeft / 60);
                const secs = timeLeft % 60;
                timerDisplay.textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 0) {
                    clearInterval(testTimer);
                    submitTest();
                }
                
                timeLeft--;
            }, 1000);
        }

        function displayQuestion() {
            const question = currentTest[currentQuestionIndex];
            
            // Update question counter and progress
            document.getElementById('questionCounter').textContent = `Question ${currentQuestionIndex + 1} of ${currentTest.length}`;
            const progress = ((currentQuestionIndex + 1) / currentTest.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            
            // Display question
            document.getElementById('questionText').textContent = question.question;
            
            // Display answers
            const answersContainer = document.getElementById('answersContainer');
            answersContainer.innerHTML = '';
            
            // Check if this question was already answered
            const isAnswered = userAnswers[currentQuestionIndex] !== null;
            
            question.answers.forEach((answer, index) => {
                const li = document.createElement('li');
                li.className = 'answer-item';
                
                if (isAnswered) {
                    // Show feedback for already answered questions
                    if (index === question.correct) {
                        li.classList.add('correct');
                    } else if (index === userAnswers[currentQuestionIndex]) {
                        li.classList.add('incorrect');
                    }
                }
                
                li.innerHTML = `
                    <label>
                        <input type="radio" name="answer" value="${index}" ${userAnswers[currentQuestionIndex] === index ? 'checked' : ''} ${isAnswered ? 'disabled' : ''}>
                        ${answer}
                    </label>
                `;
                
                if (!isAnswered) {
                    li.addEventListener('click', () => selectAnswer(index));
                }
                answersContainer.appendChild(li);
            });
            
            // Update navigation buttons
            document.getElementById('prevButton').disabled = currentQuestionIndex === 0;
            
            if (currentQuestionIndex === currentTest.length - 1) {
                document.getElementById('nextButton').style.display = 'none';
                document.getElementById('submitButton').style.display = 'block';
            } else {
                document.getElementById('nextButton').style.display = 'block';
                document.getElementById('submitButton').style.display = 'none';
            }
        }

        function selectAnswer(answerIndex) {
            userAnswers[currentQuestionIndex] = answerIndex;
            
            // Update visual selection
            document.querySelectorAll('.answer-item').forEach(item => {
                item.classList.remove('selected');
            });
            document.querySelectorAll('.answer-item')[answerIndex].classList.add('selected');
            document.querySelectorAll('input[name="answer"]')[answerIndex].checked = true;
            
            // Don't show feedback immediately - wait for next button click
        }

        function showAnswerFeedback(selectedAnswer) {
            const question = currentTest[currentQuestionIndex];
            const answerItems = document.querySelectorAll('.answer-item');
            
            answerItems.forEach((item, index) => {
                const label = item.querySelector('label');
                
                if (index === question.correct) {
                    setTimeout(() => {
                        item.classList.add('correct');
                        // Green color feedback is sufficient
                    }, 100);
                } else if (index === selectedAnswer) {
                    setTimeout(() => {
                        item.classList.add('incorrect');
                        // Red color feedback is sufficient
                    }, 100);
                }
            });

            document.querySelectorAll('input[name="answer"]').forEach(radio => {
                radio.disabled = true;
            });
        }

        function nextQuestion() {
            // Show feedback for current question if answered
            if (userAnswers[currentQuestionIndex] !== null) {
                showAnswerFeedback(userAnswers[currentQuestionIndex]);
                
                // Wait for animation before moving to next question
                setTimeout(() => {
                    if (currentQuestionIndex < currentTest.length - 1) {
                        currentQuestionIndex++;
                        displayQuestion();
                    }
                }, 1000);
            } else {
                // Move to next question without feedback if no answer selected
                if (currentQuestionIndex < currentTest.length - 1) {
                    currentQuestionIndex++;
                    displayQuestion();
                }
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function submitTest() {
            clearInterval(testTimer);
            
            // Calculate score
            currentScore = 0;
            userAnswers.forEach((answer, index) => {
                if (answer !== null && answer === currentTest[index].correct) {
                    currentScore++;
                }
            });
            
            calculateResults();
        }

        function calculateResults() {
            const overallPercentage = Math.round((currentScore / currentTest.length) * 100);
            const passed = overallPercentage >= 72;
            
            // Create detailed results
            const detailedResults = currentTest.map((question, index) => {
                const userAnswer = userAnswers[index];
                const isCorrect = userAnswer !== null && userAnswer === question.correct;
                
                return {
                    questionId: generateQuestionId(question.question, question.section),
                    question: question.question,
                    answers: [...question.answers],
                    correctAnswer: question.correct,
                    userAnswer: userAnswer,
                    isCorrect: isCorrect,
                    topic: mapSectionToTopic(question.section)
                };
            });
            
            // Save to history
            const testResult = {
                type: selectedTestType,
                score: overallPercentage,
                passed: passed,
                date: new Date().toLocaleDateString(),
                time: new Date().toLocaleTimeString(),
                totalQuestions: currentTest.length,
                correctAnswers: currentScore,
                detailedResults: detailedResults
            };
            
            testHistory.unshift(testResult);
            if (testHistory.length > 20) testHistory.pop();
            localStorage.setItem('epa608History', JSON.stringify(testHistory));
            
            displayResults(overallPercentage, passed);
        }

        function displayResults(score, passed) {
            // Hide test container and show results
            document.getElementById('testContainer').style.display = 'none';
            document.getElementById('results').style.display = 'block';
            
            // Display score
            document.getElementById('scoreDisplay').textContent = score + '%';
            document.getElementById('scoreDisplay').style.color = passed ? '#28a745' : '#dc3545';
            
            // Display certification status
            const statusText = passed ? 
                '🎉 Congratulations! You passed the Type III test!' : 
                '📚 Keep studying! You need 72% to pass.';
            document.getElementById('certificationStatus').textContent = statusText;
        }

        function restartTest() {
            // Reset test state
            currentTest = [];
            currentQuestionIndex = 0;
            userAnswers = [];
            currentScore = 0;
            
            // Hide results and start test again
            document.getElementById('results').style.display = 'none';
            startTest();
        }

        // Auto-start test when page loads
        document.addEventListener('DOMContentLoaded', function() {
            startTest();
        });
        
        // Social sharing functions
        function shareOnTwitter() {
            const score = document.getElementById('scoreDisplay').textContent;
            const text = `Just scored ${score} on the EPA 608 Type 3 Practice Test! 🎯 Test your knowledge for free at`;
            const url = window.location.href;
            window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank');
        }
        
        function shareOnFacebook() {
            const url = window.location.href;
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`, '_blank');
        }
        
        function shareOnLinkedIn() {
            const score = document.getElementById('scoreDisplay').textContent;
            const title = `EPA 608 Type 3 Practice Test Result: ${score}`;
            const summary = `Just completed the EPA 608 Type 3 Practice Test and scored ${score}! Great free resource for certification prep.`;
            const url = window.location.href;
            window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}&title=${encodeURIComponent(title)}&summary=${encodeURIComponent(summary)}`, '_blank');
        }
        
        function copyTestLink() {
            const url = window.location.href;
            navigator.clipboard.writeText(url).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = '✅ Copied!';
                btn.style.background = '#28a745';
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '#6c757d';
                }, 2000);
            }).catch(() => {
                alert('Link copied to clipboard!');
            });
        }

        // Utility functions
        function generateQuestionId(questionText, section) {
            return btoa(questionText.substring(0, 50) + section).replace(/[^a-zA-Z0-9]/g, '').substring(0, 16);
        }

        function mapSectionToTopic(section) {
            const mapping = {
                'core': 'Environmental Regulations',
                'type1': 'Small Appliances',
                'type2': 'High-Pressure Systems', 
                'type3': 'Low-Pressure Systems'
            };
            return mapping[section] || section;
        }
    </script>
</body>
</html>